\chapter{エンドツーエンドの間にあるもの}


\chapter{エンドツーエンドの間にあるもの}

増補改訂版の追記として、エンドツーエンドであるべきインターネットの間には実際に何があるか、という話をしておこう。いずれも、現在のネットワークアプリケーションの実装では意識しなければならないものである。


\section{NAT}
IPv4アドレスの数は、プライベートアドレスを含めて4億個である。この数は、IP接続可能な機器が増えた現在では、あまりにも少ない。アドレスの数が少ないことへの根本的解決としてIPv6があるが、インターネットプロトコル層と、トランスポート層とインターネットプロトコル層とのインタフェイスが別物になるため、いまだ普及しているとは言えない。\footnote{OSでは対応が進んでいるが、インターネットサービスプロバイダでの対応は未だ行われていなかったり別メニューであったりすることが多い。}

その暫定的な解決方法として、NATというものが提案されている。これは、少数のグローバルなIPアドレスを、複数の機器(ネットワーク)で使い回すための技術である。

だが、一般的にNATという場合は、グローバルなIPアドレスとプライベートなIPアドレスを一対一に変換する、静的NATを指す場合もある、この名称に関しては、ネットワーク機器、OSなど、実装毎に同じ名前を別の意味で使用していたり、違う名前を定義していたりする。ここでは、それらをまとめて紹介しよう。

\subsection{静的NAT}
静的NAT(Static NAT)は、グローバルなIPアドレスとプライベートなIPアドレスを一対一でマッピングする。一般にNATとのみ書いて静的NATを表す場合や、MIP(Mapped IP)という用語を用いる場合もある\footnote{JuniperのNetscreenではMIPという用語を使っている}。

静的NAT装置は、インターネット側と

静的NATは、インターネットからアクセスされるサーバのためのファイアウオールで使われていることが多い。それぞれのホストが外部からのアクセスを受けるためのIPアドレスは、全て静的NAT装置に割り当てる。外部からのアクセスは全て一旦、静的NAT装置に到着する。静的NAT装置は、IPデータグラムのFromを、

\section{ファイアウオール}

\section{プロキシーサーバ}